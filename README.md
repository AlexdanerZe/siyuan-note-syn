# 思源笔记项目进展同步插件

[English](./README_en_US.md) | 中文

一个智能的思源笔记插件，自动同步日记中的项目进展到对应的项目文档中，保持项目信息的统一性和实时性。

## ✨ 核心功能

- 🔄 **自动同步**: 自动识别日记中的项目引用，将相关内容同步到项目文档
- 📝 **智能识别**: 支持多种项目引用格式：`((blockId 'name'))`、`[[name]]`、`[text](link)`
- 🎯 **精确定位**: 可配置目标位置，将内容插入到指定的标题下
- ⏰ **时间排序**: 按创建时间智能排序，保持时间线的逻辑性
- 🔍 **重复检测**: 智能检测重复内容，避免重复同步
- 🔧 **灵活配置**: 丰富的设置选项，满足不同使用场景

## 🚀 快速开始

### 安装方式

#### 方式一：从插件市场安装（推荐）
1. 打开思源笔记
2. 进入 `设置` → `集市` → `插件`  
3. 搜索"项目进展同步"
4. 点击下载并启用

#### 方式二：手动安装
1. 从 [Releases](https://github.com/your-username/siyuan-note-syn/releases) 下载最新版本的 `package.zip`
2. 解压到思源笔记的 `data/plugins/` 目录
3. 重启思源笔记或手动启用插件

### 基本使用

1. **配置插件设置**
   - 点击顶部工具栏的同步按钮 🔄
   - 或者在插件设置中配置同步规则

2. **编写日记**
   ```markdown
   ## 今日进展
   
   ((20240101010101-abcdefg '我的项目')) 今天完成了需求分析
   - 梳理了核心功能
   - 确定了技术方案
   
   [[另一个项目]] 修复了重要bug
   - 解决了数据同步问题
   - 优化了性能表现
   ```

3. **自动同步**
   - 插件会自动识别项目引用
   - 将相关内容同步到对应的项目文档
   - 按时间顺序整理项目进展

## ⚙️ 配置说明

### 识别设置

#### 日记格式配置
- **日期格式**: 默认 `YYYY-MM-DD`，支持自定义
- **文档路径**: 配置日记文档的路径模式
- **提取标题**: 默认 `今日进展`，可自定义要提取内容的标题

#### 识别类型
- **一级标题** (`h1`): `# 标题`
- **二级标题** (`h2`): `## 标题`  
- **三级标题** (`h3`): `### 标题`
- **无序列表** (`ul`): `- 项目`
- **有序列表** (`ol`): `1. 项目`
- **自定义模式**: 支持正则表达式

### 复制设置

#### 复制目标
- **启用目标标题功能**: 指定内容插入位置
- **目标内容**: 默认 `项目进展`，支持自定义
- **智能提示**: 根据选择的识别类型提供动态提示

#### 复制机制
- **自动复制**: 
  - 默认启用，检测到停止编辑后自动同步
  - 触发时间：默认10秒，可调整（最小1秒）
- **手动复制**: 
  - 快捷键：默认 `Cmd+Shift+C` (Mac) 或 `Ctrl+Shift+C` (Windows)
  - 支持自定义快捷键

## 📋 使用场景

### 场景一：项目管理
每日在日记中记录各个项目的进展，插件自动整理到项目文档中，形成完整的项目时间线。

### 场景二：工作汇报  
日记中记录的工作内容自动同步到项目文档，便于生成工作汇报和进度跟踪。

### 场景三：学习笔记
将日常学习的内容自动归类到对应的知识领域文档中。

## 🔧 高级功能

### 内容格式化
- 自动移除项目引用标记，保持内容纯净
- 保持原有格式（列表、段落等）
- 智能处理空行和缩进

### 重复内容处理
- 基于内容哈希的智能去重
- 支持内容更新时的精确替换
- 删除同步：日记中删除的内容会从项目文档中移除

### 时间排序
- 基于文档创建时间排序，而非最后修改时间
- 避免因修改旧内容导致的时间线混乱
- 新内容智能插入到正确的时间位置

## 🛠️ 故障排除

### 常见问题

**Q: 内容没有同步到项目文档？**
A: 
1. 检查日记中是否包含正确的项目引用格式
2. 确认项目文档是否存在
3. 检查插件设置中的提取标题是否正确

**Q: 出现重复内容？**
A:
1. 检查是否多次手动触发同步
2. 查看插件日志，确认重复检测是否正常工作
3. 可以手动删除重复内容，插件会记住并避免再次添加

**Q: 内容顺序不正确？**  
A:
1. 插件按文档创建时间排序，而非修改时间
2. 如果修改了旧日期的内容，它会保持在原有的时间位置
3. 检查日记的实际创建日期是否正确

### 调试模式
在浏览器控制台中可以查看详细的同步日志，包括：
- 内容识别过程
- 哈希计算和比较  
- 插入位置计算
- 错误信息

## 📝 更新日志

查看 [CHANGELOG.md](./CHANGELOG.md) 了解详细的版本更新信息。

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

### 开发环境搭建

1. Clone 项目到本地
2. 安装依赖：`pnpm install`
3. 创建开发链接：`pnpm run make-link`
4. 启动开发模式：`pnpm run dev`

### 贡献指南

1. Fork 本项目
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 打开 Pull Request

## 📄 许可证

本项目采用 [MIT](./LICENSE) 许可证。

## 🙏 致谢

- 感谢 [思源笔记](https://github.com/siyuan-note/siyuan) 提供优秀的笔记平台
- 感谢所有贡献者和用户的支持

---

如果这个插件对您有帮助，请考虑给个 ⭐ 支持一下！

有问题或建议？欢迎在 [Issues](https://github.com/your-username/siyuan-note-syn/issues) 中反馈。